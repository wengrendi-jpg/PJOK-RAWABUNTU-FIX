<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi PJOK Kelas 2 SD</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <script src="bank_soal_2.js"></script>

    <style>
        /* TEMA MERAH CERIA (KHAS KELAS 2) */
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #ffebee; margin: 0; padding: 0; display: flex; flex-direction: column; min-height: 100vh; color: #333; }
        
        .header-top { background: #fff; padding: 15px 30px; border-bottom: 4px solid #e53935; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
        .header-top h1 { margin: 0; color: #b71c1c; font-size: 22px; font-weight: 800; text-transform: uppercase; }
        .back-btn { display: inline-flex; align-items: center; gap: 8px; background-color: #e53935; color: white; text-decoration: none; font-weight: 700; font-size: 13px; padding: 8px 20px; border-radius: 50px; transition: 0.3s; }
        
        .main-container { width: 95%; max-width: 1250px; margin: 30px auto; padding: 0; display: flex; gap: 25px; box-sizing: border-box; flex: 1; }
        .sidebar { width: 280px; flex-shrink: 0; background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #ffcdd2; position: sticky; top: 100px; }
        .content-area { flex-grow: 1; background: #fff; padding: 40px; border-radius: 12px; border: 1px solid #ffcdd2; min-height: 800px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }

        .logo-area { text-align: center; margin-bottom: 25px; border-bottom: 2px dashed #ef9a9a; padding-bottom: 20px; }
        .logo-area img { width: 80px !important; height: 80px !important; object-fit: cover; border-radius: 50%; border: 4px solid #e53935; padding: 4px; display: inline-block; }
        
        .menu-label { font-weight: 900; color: #c62828; margin: 25px 0 10px 0; font-size: 0.85em; text-transform: uppercase; padding-left: 10px; border-left: 4px solid #e53935; }
        .nav-btn { display: block; width: 100%; padding: 12px 18px; margin-bottom: 8px; background: #ffebee; border: none; border-radius: 10px; text-align: left; cursor: pointer; color: #b71c1c; font-size: 14px; font-weight: 600; transition: 0.2s; }
        .nav-btn.active { background: linear-gradient(135deg, #ef5350, #c62828); color: white; box-shadow: 0 4px 10px rgba(183, 28, 28, 0.3); }

        h2 { border-bottom: 3px solid #e53935; color: #b71c1c; padding-bottom: 15px; margin-top: 0; font-size: 24px; font-weight: 800; }
        .video-container { width: 100%; aspect-ratio: 16/9; background: #000; margin-bottom: 30px; border-radius: 12px; border: 4px solid #ef5350; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
        .info-card { background: #fffdea; border: 1px solid #ffcdd2; border-left: 5px solid #e53935; padding: 20px; border-radius: 8px; margin-bottom: 30px; line-height: 1.6; font-size: 15px; text-align: justify; }
        .info-card h3 { margin: 0 0 10px; color: #b71c1c; font-size: 16px; font-weight: 800; }

        .exam-header { text-align: center; background: #fff3e0; border: 2px solid #ff9800; padding: 30px; border-radius: 12px; margin-bottom: 30px; }
        .exam-title { font-size: 22px; font-weight: 900; color: #e65100; margin-bottom: 10px; text-transform: uppercase; }
        .exam-desc { font-size: 15px; color: #555; max-width: 700px; margin: 0 auto 20px; line-height: 1.6; }
        .badge { display: inline-block; background: #fff; border: 1px solid #ff9800; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; color: #e65100; margin: 0 5px; }

        .btn-group { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 25px; }
        .action-btn { flex: 1; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: 800; font-size: 14px; color: white; transition: 0.2s; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        .btn-quiz { background: linear-gradient(135deg, #ff9800, #f57c00); }
        .btn-download { background: linear-gradient(135deg, #1976d2, #1565c0); }
        .btn-kisi { background: linear-gradient(135deg, #00796b, #004d40); }
        .action-btn:disabled { background: #e0e0e0; color: #999; cursor: not-allowed; transform: none; box-shadow: none; }

        /* KISI-KISI STYLING (MENGIKUTI CONTOH DOCX) */
        .kisi-container { display: none; margin-top: 25px; background: #fafafa; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .kisi-table { width: 100%; border-collapse: collapse; font-size: 13px; font-family: 'Times New Roman', serif; }
        .kisi-table th { background: #ffcdd2; padding: 10px; border: 1px solid #e57373; color: #b71c1c; text-align: center; vertical-align: middle; }
        .kisi-table td { padding: 8px; border: 1px solid #ccc; vertical-align: top; }
        .kisi-table tr:nth-child(even) { background-color: #fffde7; }
        
        #pdf-overlay { position: absolute; top: 0; left: 0; z-index: -9999; visibility: hidden; width: 790px; background: white; }
        #pdf-content { width: 100%; background: white; color: black; font-family: Arial, sans-serif; font-size: 11pt; line-height: 1.3; padding: 0; }
        .pdf-header-table { width: 100%; border-bottom: 3px double #000; margin-bottom: 10px; }
        .pdf-section { margin-top: 15px; font-weight: bold; }
        .pdf-item { margin-bottom: 8px; page-break-inside: avoid !important; }

        /* ========================================= */
        /* PERBAIKAN KHUSUS MOBILE (RESPONSIVE)      */
        /* ========================================= */
        @media (max-width: 768px) {
            .header-top { flex-direction: column; gap: 10px; padding: 10px; }
            .header-top h1 { font-size: 18px; text-align: center; }
            
            .main-container { 
                flex-direction: column; /* Menu di atas, Konten di bawah */
                margin: 10px auto; 
                width: 95%;
            } 
            
            /* Sidebar dibuat lebih ringkas di HP */
            .sidebar { 
                width: 100%; 
                position: relative; /* Tidak sticky agar tidak menutupi layar */
                top: 0;
                padding: 15px;
                margin-bottom: 20px;
                box-sizing: border-box;
                border-bottom: 4px solid #bbdefb;
            }

            .logo-area img { width: 50px !important; height: 50px !important; }
            .logo-area p { display: none; } /* Sembunyikan nama sekolah di menu HP biar hemat tempat */
            .logo-area { margin-bottom: 10px; padding-bottom: 10px; }

            .menu-label { margin: 10px 0 5px 0; font-size: 0.8em; }

            /* Tombol Menu jadi 2 Kolom (Grid) agar tidak memanjang ke bawah */
            .nav-btn {
                display: inline-block;
                width: 48%; /* Setengah lebar */
                margin-right: 2%;
                margin-bottom: 8px;
                font-size: 12px;
                padding: 10px;
                vertical-align: middle;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            /* Tombol Ujian tetap Full Width biar jelas */
            #nav-sts, #nav-sas { width: 100%; background-color: #fff3e0; }

            /* Konten Materi */
            .content-area { 
                padding: 15px; 
                min-height: auto; 
                width: 100%;
                box-sizing: border-box;
            }
            
            h2 { font-size: 18px; }
            
            .btn-group { flex-direction: column; }
            .action-btn { margin-bottom: 10px; width: 100%; }
        }
    </style>
</head>
<body>

    <div class="header-top">
        <div class="header-left"><a href="dashboard.html" class="back-btn">‚¨Ö Dashboard</a></div>
        <div class="header-center"><h1>MATERI PJOK KELAS 2 SD</h1></div>
        <div class="header-right"></div>
    </div>

    <div class="main-container">
        <aside class="sidebar">
            <div class="logo-area">
                <img src="logo_final.png" alt="Logo" onerror="this.style.display='none'">
                <p style="margin:10px 0 0 0; font-weight:800; color:#555; font-size:13px;">SD NEGERI 1 CERDAS</p>
            </div>
            
            <div class="menu-label">SEMESTER 1 (GANJIL)</div>
            <button id="nav-a" class="nav-btn active" onclick="bukaHalaman('a', this)">A. Variasi Gerak Lokomotor</button>
            <button id="nav-b" class="nav-btn" onclick="bukaHalaman('b', this)">B. Variasi Gerak Non-Lokomotor</button>
            <button id="nav-c" class="nav-btn" onclick="bukaHalaman('c', this)">C. Gerak Manipulatif</button>
            <button id="nav-d" class="nav-btn" onclick="bukaHalaman('d', this)">D. Kebugaran Jasmani</button>
            <button id="nav-sts" class="nav-btn" style="border-left:4px solid #ff9800;" onclick="bukaHalaman('sts', this)">üìù UJIAN STS</button>
            
            <div class="menu-label">SEMESTER 2 (GENAP)</div>
            <button id="nav-e" class="nav-btn" onclick="bukaHalaman('e', this)">E. Senam Lantai</button>
            <button id="nav-f" class="nav-btn" onclick="bukaHalaman('f', this)">F. Gerak Berirama</button>
            <button id="nav-g" class="nav-btn" onclick="bukaHalaman('g', this)">G. Aktivitas Air</button>
            <button id="nav-h" class="nav-btn" onclick="bukaHalaman('h', this)">H. Kebersihan Lingkungan</button>
            <button id="nav-sas" class="nav-btn" style="border-left:4px solid #ff9800;" onclick="bukaHalaman('sas', this)">üèÜ UJIAN SAS</button>
        </aside>

        <main class="content-area">
            <div id="content-dynamic"></div>
        </main>
    </div>
    
    <div id="conn-status" style="position:fixed;bottom:10px;right:10px;background:#333;color:white;padding:5px 15px;border-radius:20px;font-size:11px;">Status: Menghubungkan...</div>
    <div id="pdf-overlay"><div id="pdf-content"></div></div>

    <script>
       // DATA MATERI KELAS 2
        const dataMateri = {
            'a': { 
                title: "A. Variasi Gerak Lokomotor", 
                vid: "gwtkrHgAm_I", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Variasi gerak lokomotor mengembangkan kemampuan perpindahan tempat dengan pola gerak yang lebih kompleks dan bervariasi dibanding kelas 1. Beberapa variasi yang dipelajari:<br>1. <b>Berjalan jinjit:</b> Melatih keseimbangan dan kekuatan betis dengan berjalan menggunakan ujung kaki<br>2. <b>Berjalan mundur:</b> Mengembangkan koordinasi dan kesadaran spasial tanpa melihat ke belakang<br>3. <b>Berlari zig-zag:</b> Melatih kelincahan, kecepatan mengubah arah, dan kontrol tubuh<br>4. <b>Melompat melewati rintangan:</b> Mengembangkan kekuatan kaki, keberanian, dan ketepatan tolakan<br><br>Latihan ini meningkatkan koordinasi gerak, keseimbangan dinamis, kelincahan, serta kemampuan tubuh beradaptasi dengan berbagai pola gerakan dalam situasi berbeda." 
            },
            'b': { 
                title: "B. Variasi Gerak Non-Lokomotor", 
                vid: "Xh-k47mLT0A", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Variasi gerak non-lokomotor memperluas gerakan dasar tanpa berpindah tempat dengan kompleksitas lebih tinggi. Variasi yang dipelajari:<br>1. <b>Memutar pinggang dua arah:</b> Meningkatkan fleksibilitas otot perut dan pinggang<br>2. <b>Mengayun lengan berbagai arah:</b> Melatih koordinasi bahu dan lengan dengan ritme berbeda<br>3. <b>Menekuk lutut variasi:</b> Tekuk lutut dalam-dalam, setengah, dan kombinasi dengan gerakan lain<br>4. <b>Meliukkan badan:</b> Gerakan ke samping kiri dan kanan untuk kelenturan tulang belakang<br><br>Manfaat latihan: meningkatkan kelenturan tubuh secara menyeluruh, memperkuat sendi-sendi, melatih kontrol tubuh statis, serta mempersiapkan tubuh untuk gerakan olahraga yang lebih kompleks. Gerakan ini juga membantu postur tubuh yang baik." 
            },
            'c': { 
                title: "C. Gerak Manipulatif", 
                vid: "goy81eXSiRQ", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Gerak manipulatif dengan bola berkembang lebih kompleks dengan berbagai teknik dasar:<br>1. <b>Melempar bola ke sasaran:</b> Latihan akurasi dengan melempar ke target tertentu (keranjang, lingkaran) menggunakan teknik dasar<br>2. <b>Menangkap bola lambung/mendatar:</b> Membedakan teknik menangkap bola yang datang dari atas (lambung) dan lurus (mendatar)<br>3. <b>Menendang bola:</b> Menggunakan kaki bagian dalam untuk kontrol yang lebih baik ke arah gawang atau target<br>4. <b>Menggiring bola sederhana:</b> Pengenalan dasar mengontrol bola sambil berjalan<br><br>Latihan ini mengembangkan koordinasi mata-tangan-kaki yang lebih baik, ketepatan gerak, kemampuan mengantisipasi arah bola, kerja sama dalam permainan sederhana, serta pengenalan aturan dasar dalam olahraga bola." 
            },
            'd': { 
                title: "D. Kebugaran Jasmani", 
                vid: "up7sgRsBT-Y",  
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Latihan kebugaran jasmani sederhana untuk anak usia dini:<br><b>Kekuatan Otot:</b><br>1. <b>Push-up dinding:</b> Variasi aman untuk melatih otot dada, bahu, dan lengan<br>2. <b>Menahan beban tubuh:</b> Bertahan dalam posisi plank sederhana atau sikap kapal terbang<br>3. <b>Squat anak-anak:</b> Menekuk lutut dengan benar untuk kekuatan kaki<br><br><b>Kelenturan Tubuh:</b><br>1. Peregangan statis untuk otot hamstring, paha, dan punggung<br>2. Gerakan memutar sendi pergelangan tangan, kaki, dan leher<br>3. Mencium lutut dalam posisi duduk untuk kelenturan punggung<br><br>Tujuan: membangun fondasi kebugaran dasar, meningkatkan daya tahan tubuh, mencegah obesitas dini, serta menanamkan kebiasaan berolahraga rutin untuk kesehatan jangka panjang." 
            },
            'e': { 
                title: "E. Senam Lantai", 
                vid: "VOD-2uZhozs", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Pengenalan dasar senam lantai dengan fokus pada keseimbangan:<br><b>Keseimbangan Statis:</b><br>1. <b>Sikap lilin:</b> Menopang tubuh dengan kedua tangan di pinggang, kaki lurus ke atas<br>2. <b>Berdiri satu kaki:</b> Bertahan dengan mata terbuka dan tertutup, berbagai durasi<br>3. <b>Sikap kapal terbang:</b> Badan condong, satu kaki belakang diangkat, lengan terbuka<br><br><b>Keseimbangan Dinamis:</b><br>1. <b>Berjalan di garis lurus:</b> Mengikuti garis tanpa keluar<br>2. <b>Berjalan di balok titian:</b> Keseimbangan di bidang sempit<br>3. <b>Berguling ke depan:</b> Pengenalan dasar guling depan dengan bantuan guru<br><br>Manfaat: meningkatkan kontrol tubuh, keberanian, kesadaran posisi tubuh di ruang, serta mempersiapkan untuk senam yang lebih kompleks. Keselamatan dalam senam sangat ditekankan." 
            },
            'f': { 
                title: "F. Gerak Berirama", 
                vid: "AvWwufqQHgE", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Variasi gerak berirama yang lebih kompleks dengan koordinasi multi-gerak:<br>1. <b>Variasi langkah kaki:</b> Langkah biasa, langkah samping, langkah silang, dan langkah hop<br>2. <b>Variasi ayunan lengan:</b> Ayunan ke depan-belakang, samping, atas-bawah, dan melingkar<br>3. <b>Kombinasi gerak:</b> Menggabungkan langkah kaki dengan ayunan lengan yang berbeda<br>4. <b>Respons terhadap tempo:</b> Bergerak cepat untuk tempo cepat, lambat untuk tempo lambat<br><br>Latihan ini mengembangkan: koordinasi gerak yang lebih kompleks, kemampuan mengikuti pola ritme berubah, ekspresi gerak sesuai emosi musik, kerja sama dalam gerak berkelompok, serta apresiasi terhadap seni gerak dan musik. Aktivitas dilakukan dengan riang gembira." 
            },
            'g': { 
                title: "G. Aktivitas Air", 
                vid: "N_TwSZUcxmQ", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Pengembangan kemampuan adaptasi air lebih lanjut:<br><b>Keselamatan Dasar:</b><br>1. Mengenal area kolam aman sesuai kemampuan<br>2. Aturan tidak berlari dan tidak mendorong di kolam<br>3. Cara memanggil bantuan jika diperlukan<br><br><b>Keterampilan Air Dasar:</b><br>1. <b>Bubbling:</b> Menahan napas dan mengeluarkan gelembung di dalam air<br>2. <b>Membuka mata dalam air:</b> Adaptasi mata dengan air (kolam bersih)<br>3. <b>Berjalan dan berlari di kolam dangkal:</b> Merasakan hambatan air<br>4. <b>Permainan air sederhana:</b> Melempar bola air, estafet benda apung<br><br>Tujuan: meningkatkan kepercayaan diri di air, pengenalan teknik pernapasan dasar, adaptasi sensorik dengan air, serta pemahaman keselamatan yang lebih matang." 
            },
            'h': { 
                title: "H. Kebersihan Lingkungan", 
                vid: "LrptiAsFLhY", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Pemahaman tentang kebersihan lingkungan sekolah dan hubungannya dengan kesehatan:<br>1. <b>Membuang sampah pada tempatnya:</b> Memisahkan sampah organik dan non-organik sederhana<br>2. <b>Menjaga kebersihan kelas:</b> Piket membersihkan meja, papan tulis, dan merapikan buku<br>3. <b>Merawat tanaman sekolah:</b> Pengenalan dasar menyiram tanaman dan membersihkan daun<br>4. <b>Menjaga kebersihan toilet sekolah:</b> Cara menggunakan yang benar dan membersihkan setelah pakai<br><br>Hubungan dengan kesehatan: lingkungan bersih mencegah penyakit (demam berdarah, diare), menciptakan suasana belajar nyaman, melatih tanggung jawab sosial, serta membentuk karakter peduli lingkungan sejak dini. Kebersihan diri tetap dipraktikkan bersama kebersihan lingkungan." 
            },
            
            // --- DATA UJIAN ---
            'sts': { 
                title: "SUMATIF TENGAH SEMESTER (STS) - GANJIL", 
                isExam: true, 
                desc: "<b>RANGKUMAN PERSIAPAN UJIAN:</b><br><br>STS Kelas 2 menguji pemahaman Bab A sampai D:<br>1. <b>Variasi Gerak Lokomotor:</b> Berjalan jinjit, mundur, lari zig-zag, lompat rintangan<br>2. <b>Variasi Gerak Non-Lokomotor:</b> Memutar pinggang, ayun lengan, tekuk lutut, liukkan badan<br>3. <b>Gerak Manipulatif:</b> Teknik lempar sasaran, tangkap bola lambung/mendatar, tendang bola<br>4. <b>Kebugaran Jasmani:</b> Latihan kekuatan (push-up dinding) dan kelenturan sederhana<br><br>Pelajari perbedaan variasi gerak, teknik dasar setiap gerakan, serta manfaat untuk kesehatan. Perhatikan keselamatan dalam praktik.",
                count: "30 Butir Soal"
            },
            'sas': { 
                title: "SUMATIF AKHIR SEMESTER (SAS) - GENAP", 
                isExam: true, 
                desc: "<b>RANGKUMAN PERSIAPAN UJIAN:</b><br><br>SAS Kelas 2 menguji Bab E sampai H:<br>1. <b>Senam Lantai:</b> Keseimbangan statis (sikap lilin, berdiri satu kaki) dan dinamis (jalan garis, guling depan)<br>2. <b>Gerak Berirama:</b> Variasi langkah dan ayunan lengan mengikuti irama<br>3. <b>Aktivitas Air:</b> Keselamatan di air, bubbling, adaptasi mata dengan air<br>4. <b>Kebersihan Lingkungan:</b> Cara menjaga kebersihan kelas, membuang sampah, merawat tanaman<br><br>Pahami teknik dasar setiap aktivitas, aturan keselamatan, serta manfaat untuk kesehatan dan lingkungan. Ujian ini menilai pemahaman konsep kesehatan menyeluruh.",
                count: "30 Butir Soal"
            }
        };

        // ===========================================
        // KISI-KISI UPDATE (SINKRON DENGAN BANK SOAL)
        // ===========================================
        
        const HTML_KISI_STS = `
            <div style="text-align:center; font-weight:bold; margin-bottom:10px; font-size:16px; border-bottom:3px solid #e53935; padding-bottom:10px;">KISI-KISI SOAL STS KELAS 2 (GANJIL)</div>
            <table class="kisi-table" width="100%">
                <thead>
                    <tr>
                        <th width="5%">NO</th>
                        <th width="20%">MATERI</th>
                        <th>INDIKATOR SOAL</th>
                        <th width="15%">BENTUK SOAL</th>
                        <th width="10%">NO SOAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab A.</b><br>Variasi Gerak Dasar Lokomotor</td>
                        <td>Disajikan pernyataan, siswa dapat menyebutkan arah berjalan jinjit dan berjalan mundur.</td>
                        <td>Pilihan Ganda</td>
                        <td>1-3</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Disajikan gambar, siswa dapat menentukan prosedur lari zig-zag melewati rintangan.</td>
                        <td>Pilihan Ganda</td>
                        <td>4-7</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Siswa dapat menyebutkan contoh variasi gerakan melompat (ke depan/samping).</td>
                        <td>Essay</td>
                        <td>1</td>
                    </tr>

                    <tr>
                        <td>4</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab B.</b><br>Variasi Gerak Non-Lokomotor</td>
                        <td>Disajikan gambar, siswa mampu menentukan gerakan memutar pinggang atau mengayun lengan.</td>
                        <td>Pilihan Ganda</td>
                        <td>8-11</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Siswa dapat menjelaskan tujuan gerakan menekuk lutut (melatih otot kaki/keseimbangan).</td>
                        <td>Isian</td>
                        <td>21, 22</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Siswa dapat menyebutkan anggota tubuh yang bergerak saat meliukkan badan.</td>
                        <td>Essay</td>
                        <td>2</td>
                    </tr>

                    <tr>
                        <td>7</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab C.</b><br>Gerak Dasar Manipulatif</td>
                        <td>Siswa mengetahui posisi tangan yang benar saat menangkap bola melambung.</td>
                        <td>Pilihan Ganda</td>
                        <td>12-15</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Disajikan pernyataan, siswa dapat menyebutkan bagian kaki untuk menendang bola jarak pendek.</td>
                        <td>Isian</td>
                        <td>23</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Siswa dapat menjelaskan cara melempar bola ke sasaran tertentu dengan tepat.</td>
                        <td>Essay</td>
                        <td>3</td>
                    </tr>

                    <tr>
                        <td>10</td>
                        <td rowspan="2" style="vertical-align:middle;"><b>Bab D.</b><br>Kebugaran Jasmani</td>
                        <td>Disajikan gambar, siswa dapat mengidentifikasi latihan kekuatan otot lengan (Push-up dinding).</td>
                        <td>Isian</td>
                        <td>24, 25</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>Siswa dapat menjelaskan manfaat melakukan pemanasan sebelum berolahraga (mencegah cedera).</td>
                        <td>Essay</td>
                        <td>4, 5</td>
                    </tr>
                </tbody>
            </table>`; 

        const HTML_KISI_SAS = `
            <div style="text-align:center; font-weight:bold; margin-bottom:10px; font-size:16px; border-bottom:3px solid #e53935; padding-bottom:10px;">KISI-KISI SOAL SAS KELAS 2 (GENAP)</div>
            <table class="kisi-table" width="100%">
                <thead>
                    <tr>
                        <th width="5%">NO</th>
                        <th width="20%">MATERI</th>
                        <th>INDIKATOR SOAL</th>
                        <th width="15%">BENTUK SOAL</th>
                        <th width="10%">NO SOAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab E.</b><br>Senam Lantai</td>
                        <td>Disajikan gambar, siswa mampu menentukan sikap keseimbangan statis (Pesawat Terbang/Lilin).</td>
                        <td>Pilihan Ganda</td>
                        <td>1-4</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Siswa dapat menjelaskan posisi awal tubuh (jongkok/berdiri) saat akan berguling ke depan.</td>
                        <td>Isian</td>
                        <td>21</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Siswa dapat menyebutkan alat pengaman utama dalam senam lantai (matras).</td>
                        <td>Essay</td>
                        <td>1</td>
                    </tr>

                    <tr>
                        <td>4</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab F.</b><br>Gerak Berirama</td>
                        <td>Disajikan gambar, siswa dapat mengidentifikasi gerak langkah tunggal (single step) ke samping.</td>
                        <td>Pilihan Ganda</td>
                        <td>5-9</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Siswa dapat menyebutkan kombinasi ayunan lengan dan langkah kaki sesuai irama.</td>
                        <td>Isian</td>
                        <td>22, 23</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Siswa dapat menjelaskan arti keserasian gerak dengan irama musik/ketukan.</td>
                        <td>Essay</td>
                        <td>2</td>
                    </tr>

                    <tr>
                        <td>7</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab G.</b><br>Aktivitas Air</td>
                        <td>Siswa mengetahui teknik dasar bernapas di dalam air (bubbling/meniup air).</td>
                        <td>Pilihan Ganda</td>
                        <td>10-13</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Disajikan pernyataan, siswa dapat menyebutkan perlengkapan renang yang wajib (baju renang/kacamata).</td>
                        <td>Isian</td>
                        <td>24</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Siswa dapat menjelaskan peraturan keselamatan di kolam renang (dilarang berlari).</td>
                        <td>Essay</td>
                        <td>3</td>
                    </tr>

                    <tr>
                        <td>10</td>
                        <td rowspan="2" style="vertical-align:middle;"><b>Bab H.</b><br>Kebersihan Lingkungan</td>
                        <td>Disajikan gambar, siswa dapat menunjukkan alat yang digunakan untuk membersihkan kelas (sapu/pel).</td>
                        <td>Pilihan Ganda</td>
                        <td>14-15</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>Siswa dapat menjelaskan akibat membuang sampah sembarangan (banjir/sumber penyakit).</td>
                        <td>Essay</td>
                        <td>4, 5</td>
                    </tr>
                </tbody>
            </table>`;

        // FIREBASE
        const firebaseConfig = { apiKey: "AIzaSyD7FsbgyUF1jvDvcrb6wrWlEiQJUFZG3kE", authDomain: "pjok-sekolah-bapak-rendi.firebaseapp.com", databaseURL: "https://pjok-sekolah-bapak-rendi-default-rtdb.asia-southeast1.firebasedatabase.app", projectId: "pjok-sekolah-bapak-rendi", appId: "1:337016584526:web:8534c7cf4012a35427861f" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        let statusUjian = {};

        database.ref('akses_soal/kelas_2').on('value', (snap) => {
            statusUjian = snap.val() || {};
            renderPage(); 
            document.getElementById('conn-status').innerText = "Status: Terhubung Database";
            document.getElementById('conn-status').style.background = "#00c853";
        });

        let cur = 'a';
        function bukaHalaman(k, b) { cur=k; document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active')); if(b)b.classList.add('active'); renderPage(); }

        function renderPage() {
            const d = dataMateri[cur];
            const isOpen = statusUjian[cur.toUpperCase()] === true;
            let h = `<h2>${d.title}</h2>`;

            if(!d.isExam) {
                h += `
                <div class="video-container"><iframe src="https://www.youtube.com/embed/${d.vid}" allowfullscreen></iframe></div>
                <div class="info-card"><h3>üìã Rangkuman Materi</h3>${d.desc}</div>`;
            } else {
                h += `
                <div class="exam-header">
                    <div class="exam-title">${d.title}</div>
                    <div class="exam-desc">${d.desc}</div>
                    <div><span class="badge">‚è± 90 Menit</span><span class="badge">üìù ${d.count}</span><span class="badge">üõ° Mandiri</span></div>
                </div>`;
            }

            h += `<div class="btn-group">`;
            if(d.isExam) h += `<button class="action-btn btn-kisi" onclick="tampilKisi('${cur}')">üëÅÔ∏è LIHAT KISI-KISI</button>`;
            
            if(isOpen) {
                h += `<button class="action-btn btn-quiz" onclick="window.location.href='kuis_kelas_2.html?bab=${cur.toUpperCase()}&kelas=2'">üöÄ KERJAKAN SEKARANG</button>`;
                h += `<button class="action-btn btn-download" onclick="downloadSoal('${cur}')">üìÑ DOWNLOAD NASKAH SOAL</button>`;
            } else {
                h += `<button class="action-btn" disabled style="background:#e0e0e0; color:#999;">üîí AKSES TERTUTUP</button>`;
            }
            h += `</div>`;

            if(d.isExam) {
                const isiKisi = cur === 'sts' ? HTML_KISI_STS : HTML_KISI_SAS;
                h += `<div id="kisi-${cur}" class="kisi-container">${isiKisi}</div>`;
            }

            document.getElementById('content-dynamic').innerHTML = h;
            window.scrollTo(0,0);
        }

        function tampilKisi(kode) {
            const el = document.getElementById('kisi-' + kode);
            if(el) { el.style.display = el.style.display === 'block' ? 'none' : 'block'; if(el.style.display === 'block') el.scrollIntoView({behavior:'smooth'}); }
        }

        window.downloadSoal = function(kode) {
            if(!window.BANK_SOAL_2 || !window.BANK_SOAL_2[kode.toUpperCase()]) { alert("Bank soal belum dimuat."); return; }
            window.scrollTo(0, 0);

            const soal = window.BANK_SOAL_2[kode.toUpperCase()];
            const judul = dataMateri[kode].title.replace("A. ", "").replace("B. ", "").replace("C. ", "").replace("D. ", "").replace("E. ", "").replace("F. ", "").replace("G. ", "").replace("H. ", "");
            
            const div = document.getElementById('pdf-content');
            let html = `
                <table class="pdf-header-table">
                    <tr><td align="center"><h3 style="margin:0; font-size:16pt;">LEMBAR KERJA PESERTA DIDIK (LKPD)</h3><h4 style="margin:5px 0; font-size:14pt;">SD NEGERI 1 CERDAS - PJOK KELAS 2</h4></td></tr>
                </table>
                <table width="100%" style="margin-bottom:15px; border-bottom:2px solid black; font-weight:bold;">
                    <tr><td>Nama : ...........................................</td><td align="right">Hari/Tgl : ..........................</td></tr>
                    <tr><td>Materi : ${judul}</td><td align="right">Nilai : ..........................</td></tr>
                </table>`;

            let no = 1;
            if(soal.pg) {
                html += `<div class="pdf-section">I. Pilihlah jawaban yang paling benar!</div>`;
                soal.pg.forEach(s => {
                    html += `<div class="pdf-item">${no}. ${s.q}<br><div class="pdf-options">A. ${s.opt[0]} &nbsp;&nbsp; B. ${s.opt[1]} &nbsp;&nbsp; C. ${s.opt[2]}</div></div>`;
                    no++;
                });
            }
            if(soal.isian) {
                html += `<div class="pdf-section">II. Isilah titik-titik di bawah ini!</div>`;
                soal.isian.forEach(s => { html += `<div class="pdf-item">${no}. ${s} ...........................................</div>`; no++; });
            }
            if(soal.essay) {
                html += `<div class="pdf-section">III. Jawablah pertanyaan berikut!</div>`;
                soal.essay.forEach(s => { html += `<div class="pdf-item">${no}. ${s}<br><br><br></div>`; no++; });
            }

            div.innerHTML = html;

            html2pdf().set({
                margin: [10, 15, 15, 15],
                filename: `Naskah_Soal_K2_${kode.toUpperCase()}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true, scrollY: 0 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            }).from(div).save();
        };

        window.onload = () => {
            const navA = document.getElementById('nav-a');
            if(navA) bukaHalaman('a', navA);
        };
    </script>
</body>
</html>