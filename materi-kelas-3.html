<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi PJOK Kelas 3 SD</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="bank_soal_3.js"></script>

    <style>
        /* TEMA BIRU CERIA (KHAS KELAS 3) */
        body { font-family: 'Nunito', sans-serif; background-color: #e3f2fd; margin: 0; padding: 0; display: flex; flex-direction: column; min-height: 100vh; color: #333; }
        
        /* HEADER ATAS */
        .header-top { background: #fff; padding: 15px 30px; border-bottom: 4px solid #1565c0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
        .header-top h1 { margin: 0; color: #0d47a1; font-size: 22px; font-weight: 800; text-transform: uppercase; }
        .back-btn { display: inline-flex; align-items: center; gap: 8px; background-color: #1565c0; color: white; text-decoration: none; font-weight: 700; font-size: 13px; padding: 8px 20px; border-radius: 50px; transition: 0.3s; }
        .back-btn:hover { background-color: #0d47a1; }
        
        /* LAYOUT UTAMA */
        .main-container { width: 95%; max-width: 1250px; margin: 30px auto; padding: 0; display: flex; gap: 25px; box-sizing: border-box; flex: 1; }
        
        /* SIDEBAR (MENU KIRI) */
        .sidebar { width: 280px; flex-shrink: 0; background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #bbdefb; position: sticky; top: 100px; height: fit-content; }
        
        .logo-area { text-align: center; margin-bottom: 25px; border-bottom: 2px dashed #bbdefb; padding-bottom: 20px; }
        .logo-area img { width: 80px !important; height: 80px !important; object-fit: cover; border-radius: 50%; border: 4px solid #1565c0; padding: 4px; display: inline-block; }
        
        .menu-label { font-weight: 900; color: #1565c0; margin: 25px 0 10px 0; font-size: 0.85em; text-transform: uppercase; padding-left: 10px; border-left: 4px solid #1565c0; }
        .nav-btn { display: block; width: 100%; padding: 12px 18px; margin-bottom: 8px; background: #e3f2fd; border: none; border-radius: 10px; text-align: left; cursor: pointer; color: #0d47a1; font-size: 14px; font-weight: 700; transition: 0.2s; font-family: 'Nunito', sans-serif; }
        .nav-btn:hover { transform: translateX(5px); background: #bbdefb; }
        .nav-btn.active { background: linear-gradient(135deg, #42a5f5, #1565c0); color: white; box-shadow: 0 4px 10px rgba(21, 101, 192, 0.3); }

        /* KONTEN KANAN */
        .content-area { flex-grow: 1; background: #fff; padding: 40px; border-radius: 12px; border: 1px solid #bbdefb; min-height: 800px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }

        h2 { border-bottom: 3px solid #1565c0; color: #0d47a1; padding-bottom: 15px; margin-top: 0; font-size: 24px; font-weight: 800; }
        
        /* VIDEO WRAPPER */
        .video-container { width: 100%; aspect-ratio: 16/9; background: #000; margin-bottom: 30px; border-radius: 12px; border: 4px solid #64b5f6; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
        
        /* DESKRIPSI MATERI */
        .info-card { background: #e3f2fd; border: 1px solid #bbdefb; border-left: 5px solid #1565c0; padding: 20px; border-radius: 8px; margin-bottom: 30px; line-height: 1.6; font-size: 15px; text-align: justify; }
        .info-card h3 { margin: 0 0 10px; color: #0d47a1; font-size: 16px; font-weight: 800; }

        /* TAMPILAN UJIAN */
        .exam-header { text-align: center; background: #fff3e0; border: 2px solid #ff9800; padding: 30px; border-radius: 12px; margin-bottom: 30px; }
        .exam-title { font-size: 22px; font-weight: 900; color: #e65100; margin-bottom: 10px; text-transform: uppercase; }
        .exam-desc { font-size: 15px; color: #555; max-width: 700px; margin: 0 auto 20px; line-height: 1.6; }
        .badge { display: inline-block; background: #fff; border: 1px solid #ff9800; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; color: #e65100; margin: 0 5px; }

        /* TOMBOL AKSI */
        .btn-group { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 25px; }
        .action-btn { flex: 1; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: 800; font-size: 14px; color: white; transition: 0.2s; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-family: 'Nunito', sans-serif; }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        
        .btn-quiz { background: linear-gradient(135deg, #1565c0, #0d47a1); } /* Biru Tua */
        .btn-download { background: linear-gradient(135deg, #00897b, #004d40); } /* Hijau Teal */
        .btn-kisi { background: linear-gradient(135deg, #fb8c00, #ef6c00); } /* Orange */
        
        .action-btn:disabled { background: #e0e0e0; color: #999; cursor: not-allowed; transform: none; box-shadow: none; }

        /* KISI-KISI & PDF */
        .kisi-container { display: none; margin-top: 25px; background: #fafafa; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .kisi-table { width: 100%; border-collapse: collapse; font-size: 13px; font-family: 'Times New Roman', serif; }
        .kisi-table th { background: #bbdefb; padding: 10px; border: 1px solid #90caf9; color: #0d47a1; text-align: center; vertical-align: middle; }
        .kisi-table td { padding: 8px; border: 1px solid #ccc; vertical-align: top; }
        .kisi-table tr:nth-child(even) { background-color: #e3f2fd; }
        
        #pdf-overlay { position: absolute; top: 0; left: 0; z-index: -9999; visibility: hidden; width: 790px; background: white; }
        #pdf-content { width: 100%; background: white; color: black; font-family: Arial, sans-serif; font-size: 11pt; line-height: 1.3; padding: 0; }
        .pdf-header-table { width: 100%; border-bottom: 3px double #000; margin-bottom: 10px; }
        .pdf-section { margin-top: 15px; font-weight: bold; }
        .pdf-item { margin-bottom: 8px; page-break-inside: avoid !important; }

       /* ========================================= */
        /* PERBAIKAN KHUSUS MOBILE (RESPONSIVE)      */
        /* ========================================= */
        @media (max-width: 768px) {
            .header-top { flex-direction: column; gap: 10px; padding: 10px; }
            .header-top h1 { font-size: 18px; text-align: center; }
            
            .main-container { 
                flex-direction: column; /* Menu di atas, Konten di bawah */
                margin: 10px auto; 
                width: 95%;
            } 
            
            /* Sidebar dibuat lebih ringkas di HP */
            .sidebar { 
                width: 100%; 
                position: relative; /* Tidak sticky agar tidak menutupi layar */
                top: 0;
                padding: 15px;
                margin-bottom: 20px;
                box-sizing: border-box;
                border-bottom: 4px solid #bbdefb;
            }

            .logo-area img { width: 50px !important; height: 50px !important; }
            .logo-area p { display: none; } /* Sembunyikan nama sekolah di menu HP biar hemat tempat */
            .logo-area { margin-bottom: 10px; padding-bottom: 10px; }

            .menu-label { margin: 10px 0 5px 0; font-size: 0.8em; }

            /* Tombol Menu jadi 2 Kolom (Grid) agar tidak memanjang ke bawah */
            .nav-btn {
                display: inline-block;
                width: 48%; /* Setengah lebar */
                margin-right: 2%;
                margin-bottom: 8px;
                font-size: 12px;
                padding: 10px;
                vertical-align: middle;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            /* Tombol Ujian tetap Full Width biar jelas */
            #nav-sts, #nav-sas { width: 100%; background-color: #fff3e0; }

            /* Konten Materi */
            .content-area { 
                padding: 15px; 
                min-height: auto; 
                width: 100%;
                box-sizing: border-box;
            }
            
            h2 { font-size: 18px; }
            
            .btn-group { flex-direction: column; }
            .action-btn { margin-bottom: 10px; width: 100%; }
        }
    </style>
</head>
<body>

    <div class="header-top">
        <div class="header-left"><a href="dashboard.html" class="back-btn">‚¨Ö Dashboard</a></div>
        <div class="header-center"><h1>MATERI PJOK KELAS 3 SD</h1></div>
        <div class="header-right"></div>
    </div>

    <div class="main-container">
        
        <aside class="sidebar">
            <div class="logo-area">
                <img src="logo_final.png" alt="Logo" onerror="this.style.display='none'">
                <p style="margin:10px 0 0 0; font-weight:800; color:#555; font-size:13px;">SD NEGERI 1 CERDAS</p>
            </div>
            
            <div class="menu-label">SEMESTER 1 (GANJIL)</div>
            <button id="nav-a" class="nav-btn active" onclick="bukaHalaman('a', this)">A. Gerak Lokomotor</button>
            <button id="nav-b" class="nav-btn" onclick="bukaHalaman('b', this)">B. Gerak Non-Lokomotor</button>
            <button id="nav-c" class="nav-btn" onclick="bukaHalaman('c', this)">C. Gerak Manipulatif</button>
            <button id="nav-d" class="nav-btn" onclick="bukaHalaman('d', this)">D. Kebugaran & Istirahat</button>
            <button id="nav-sts" class="nav-btn" style="border-left:4px solid #ff9800;" onclick="bukaHalaman('sts', this)">üìù UJIAN STS (PTS)</button>
            
            <div class="menu-label">SEMESTER 2 (GENAP)</div>
            <button id="nav-e" class="nav-btn" onclick="bukaHalaman('e', this)">E. Senam Lantai</button>
            <button id="nav-f" class="nav-btn" onclick="bukaHalaman('f', this)">F. Gerak Berirama</button>
            <button id="nav-g" class="nav-btn" onclick="bukaHalaman('g', this)">G. Aktivitas Renang</button>
            <button id="nav-h" class="nav-btn" onclick="bukaHalaman('h', this)">H. Kesehatan & Rokok</button>
            <button id="nav-sas" class="nav-btn" style="border-left:4px solid #ff9800;" onclick="bukaHalaman('sas', this)">üèÜ UJIAN SAS (PAS)</button>
        </aside>

        <main class="content-area">
            <div id="content-dynamic"></div>
        </main>
    </div>
    
    <div id="conn-status" style="position:fixed;bottom:10px;right:10px;background:#333;color:white;padding:5px 15px;border-radius:20px;font-size:11px;">Status: Menghubungkan...</div>
    <div id="pdf-overlay"><div id="pdf-content"></div></div>

    <script>
    // ==========================================
        // 1. DATA MATERI KELAS 3 (VIDEO DARI USER)
        // ==========================================
        const dataMateri = {
            'a': { 
                title: "A. Kombinasi Gerak Lokomotor", 
                vid: "oPCz2MjwqxI", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Kombinasi gerak lokomotor mengintegrasikan beberapa gerak dasar dalam satu rangkaian yang terkoordinasi. Beberapa kombinasi yang dipelajari:<br>1. <b>Berjalan lalu berlari:</b> Transisi mulus dari gerak lambat ke cepat dengan kontrol tubuh<br>2. <b>Berlari dilanjut melompat:</b> Menggunakan momentum lari untuk tolakan lompatan yang lebih jauh/tinggi<br>3. <b>Berlari zig-zag + lompat:</b> Kombinasi kelincahan mengubah arah dengan kekuatan melompat<br>4. <b>Permainan dengan kombinasi:</b> Estafet dengan variasi gerak, permainan tradisional seperti gobak sodor dasar<br><br>Fokus utama: melatih kelincahan, koordinasi tubuh yang lebih kompleks, kemampuan transisi antar gerak, serta penerapan dalam situasi permainan sederhana. Latihan ini meningkatkan kemampuan motorik kasar dan kesadaran spasial." 
            },
            'b': { 
                title: "B. Kombinasi Non-Lokomotor", 
                vid: "zMr1WcMppm0", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Kombinasi gerak non-lokomotor menggabungkan beberapa gerakan statis dalam satu rangkaian yang harmonis:<br>1. <b>Memutar lengan + meliukkan badan:</b> Gerakan simultan atau berurutan untuk kelenturan tubuh atas<br>2. <b>Menekuk lutut + mengayun lengan:</b> Koordinasi gerak tubuh bawah dan atas dalam ritme tertentu<br>3. <b>Meliukkan badan + memutar pinggang:</b> Kombinasi fleksi lateral dan rotasi tulang belakang<br>4. <b>Senam sederhana kombinasi:</b> Rangkaian 3-4 gerakan non-lokomotor berurutan<br><br>Tujuan: meningkatkan kelenturan otot secara menyeluruh, koordinasi gerak multi-segmen tubuh, kontrol postur yang lebih baik, serta mempersiapkan tubuh untuk senam yang lebih kompleks. Latihan ini juga membantu mengurangi risiko cedera saat beraktivitas." 
            },
            'c': { 
                title: "C. Kombinasi Manipulatif", 
                vid: "h5dQxKWCF9w", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Kombinasi gerak manipulatif mengintegrasikan keterampilan dengan alat dalam situasi yang lebih realistis:<br><b>Bola Kasti/Baseball:</b><br>1. <b>Melempar + menangkap:</b> Koordinasi sebagai pelempar dan penangkap dalam permainan sederhana<br>2. <b>Memukul bola dengan alat pemukul:</b> Teknik dasar memegang dan mengayun pemukul<br><br><b>Sepak Bola:</b><br>1. <b>Menendang + menggiring:</b> Kontrol bola setelah tendangan<br>2. <b>Menggiring + menendang ke gawang:</b> Kombinasi dalam situasi permainan mini<br><br>Latihan ini mengembangkan: koordinasi mata-tangan-kaki yang lebih kompleks, kemampuan memprediksi gerak objek, pengenalan aturan sederhana olahraga tim, kerja sama dengan teman, serta strategi dasar dalam permainan bola." 
            },
            'd': { 
                title: "D. Kebugaran & Istirahat", 
                vid: "o0fnD_UbMP0",  
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Konsep kebugaran jasmani yang lebih komprehensif mencakup latihan dan pemulihan:<br><b>Latihan Kebugaran:</b><br>1. <b>Daya tahan:</b> Jogging ringan, lari pelan jarak pendek, lompat tali dasar<br>2. <b>Kekuatan:</b> Push-up modifikasi, sit-up dengan bantuan, squat dengan beban tubuh<br>3. <b>Kelincahan:</b> Lari bolak-balik (shuttle run), lari zig-zag dengan patokan<br><br><b>Pentingnya Istirahat:</b><br>1. Tidur 9-11 jam per hari untuk pertumbuhan dan pemulihan otot<br>2. Waktu istirahat antara latihan untuk mencegah kelelahan berlebihan<br>3. Relaksasi sederhana: pernapasan dalam, peregangan ringan setelah latihan<br><br>Pemahaman: keseimbangan antara aktivitas fisik dan istirahat merupakan kunci kesehatan jangka panjang, mencegah cedera, dan mengoptimalkan pertumbuhan." 
            },
            'e': { 
                title: "E. Senam Lantai", 
                vid: "M1sCMb4G2tA", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Pengembangan kemampuan senam lantai dengan tiga elemen utama:<br><b>Gerak Bertumpu:</b><br>1. Berdiri dengan kedua tangan (handstand dengan bantuan dinding)<br>2. Bertumpu pada kepala dan kedua tangan (headstand awal dengan bantuan)<br><br><b>Gerak Keseimbangan:</b><br>1. <b>Sikap lilin:</b> Versi lebih stabil dengan kontrol perut<br>2. <b>Sikap pesawat terbang:</b> Bertahan lebih lama dengan postur yang benar<br>3. <b>Berdiri satu kaki dengan variasi:</b> Mata tertutup, mengayunkan kaki bebas<br><br><b>Gerak Berpindah:</b><br>1. <b>Guling depan (roll forward):</b> Teknik dasar dengan awalan jongkok dan tolakan kaki<br>2. Transisi dari satu gerak ke gerak lain (contoh: guling depan ke sikap lilin)<br><br>Keselamatan: penggunaan matras, bimbingan guru, dan pemanasan adekuat sangat ditekankan." 
            },
            'f': { 
                title: "F. Gerak Berirama", 
                vid: "1L5UbBIcco0", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Gerak berirama dengan kompleksitas lebih tinggi, seringkali dalam bentuk Senam Kesegaran Jasmani (SKJ) anak:<br>1. <b>Keserasian gerak:</b> Harmoni antara langkah kaki, ayunan lengan, dan putaran badan<br>2. <b>Ketepatan ritme:</b> Gerakan tepat pada hitungan/ketukan musik<br>3. <b>Kombinasi pola gerak:</b> Beberapa pola gerak berbeda dalam satu rangkaian<br>4. <b>Ekspresi gerak:</b> Menambahkan ekspresi wajah sesuai karakter musik<br><br>Bentuk latihan: SKJ dengan 8-10 hitungan per gerakan, tari tradisional sederhana berirama, atau gerak kreatif mengikuti musik. Manfaat: meningkatkan daya ingat gerak (motor memory), koordinasi kelompok, apresiasi musik, serta kebugaran kardiovaskular yang menyenangkan." 
            },
            'g': { 
                title: "G. Aktivitas Renang", 
                vid: "hkm7eF3BwaY", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Pembelajaran teknik dasar renang gaya dada (gaya katak) untuk pemula:<br><b>Teknik Dasar:</b><br>1. <b>Meluncur:</b> Dorongan dari dinding kolam dengan tubuh lurus, wajah di air<br>2. <b>Gerakan kaki:</b> Teknik gerakan kaki katak: tekuk, buka, rapat dengan dorongan<br>3. <b>Pengambilan napas:</b> Mengangkat kepala saat tangan membuka, mengambil napas<br>4. <b>Koordinasi:</b> Urutan: kaki ‚Üí tangan ‚Üí napas dengan ritme teratur<br><br><b>Keselamatan:</b><br>1. Mengenali kedalaman kolam yang sesuai<br>2. Tidak berenang sendirian tanpa pengawasan<br>3. Teknik mengapung darurat (dead man's float)<br>4. Cara berdiri di kolam saat kehilangan keseimbangan<br><br>Tahapan belajar: adaptasi air ‚Üí meluncur ‚Üí gerakan kaki ‚Üí gerakan tangan ‚Üí koordinasi ‚Üí renang jarak pendek." 
            },
            'h': { 
                title: "H. Kesehatan & Bahaya Rokok", 
                vid: "nvmJBmtyd-c", 
                desc: "<b>RANGKUMAN LENGKAP:</b><br><br>Pendidikan kesehatan tentang bahaya rokok dan hidup sehat:<br><b>Bahaya Rokok:</b><br>1. <b>Zat berbahaya:</b> Nikotin (ketagihan), tar (merusak paru-paru), karbon monoksida (mengganggu oksigen)<br>2. <b>Efek kesehatan:</b> Batuk, sesak napas, kerusakan paru-paru, gigi kuning, bau mulut<br>3. <b>Perokok pasif:</b> Bahaya menghirup asap rokok orang lain, terutama bagi anak-anak<br><br><b>Perilaku Sehat:</b><br>1. Menolak tawaran mencoba rokok dengan sopan tapi tegas<br>2. Menjauhi area merokok (smoking area)<br>3. Mengajak keluarga untuk berhenti merokok atau tidak merokok di rumah<br>4. Menjaga kebersihan lingkungan dari puntung rokok<br><br>Pesan utama: 'Hidup sehat tanpa rokok dimulai dari diri sendiri dan keluarga.' Pendidikan ini membentuk sikap anti-rokok sejak dini." 
            },
            
            // --- DATA UJIAN ---
            'sts': { 
                title: "SUMATIF TENGAH SEMESTER (STS)", 
                isExam: true, 
                desc: "<b>RANGKUMAN PERSIAPAN UJIAN:</b><br><br>STS Kelas 3 menguji Bab A sampai D:<br>1. <b>Kombinasi Gerak Lokomotor:</b> Rangkaian berjalan-berlari-lompat dalam permainan<br>2. <b>Kombinasi Non-Lokomotor:</b> Gabungan gerak memutar, meliuk, menekuk, mengayun<br>3. <b>Kombinasi Manipulatif:</b> Teknik lempar-tangkap bola kasti dan tendangan sepak bola<br>4. <b>Kebugaran & Istirahat:</b> Latihan daya tahan, kekuatan, dan pentingnya istirahat<br><br>Pelajari urutan gerakan dalam kombinasi, teknik dasar setiap olahraga, serta konsep keseimbangan aktivitas-istirahat. Perhatikan aspek keselamatan dalam setiap aktivitas.",
                count: "35 Butir Soal" 
            },
            'sas': { 
                title: "SUMATIF AKHIR SEMESTER (SAS)", 
                isExam: true, 
                desc: "<b>RANGKUMAN PERSIAPAN UJIAN:</b><br><br>SAS Kelas 3 menguji Bab E sampai H:<br>1. <b>Senam Lantai:</b> Gerak bertumpu, keseimbangan (sikap lilin/pesawat), guling depan<br>2. <b>Gerak Berirama:</b> SKJ dengan keserasian gerak dan ketepatan ritme<br>3. <b>Aktivitas Renang:</b> Teknik dasar gaya dada, keselamatan di air<br>4. <b>Kesehatan & Bahaya Rokok:</b> Zat berbahaya dalam rokok, efek kesehatan, cara menghindari<br><br>Pahami teknik dasar setiap cabang olahraga, urutan gerakan, aturan keselamatan, serta konsep hidup sehat tanpa rokok. Ujian ini mengukur pemahaman menyeluruh tentang PJOK dan kesehatan.",
                count: "35 Butir Soal" 
            }
        };

        // ===========================================
        // KISI-KISI UPDATE (LENGKAP & SINKRON KELAS 3)
        // ===========================================
        const HTML_KISI_STS = `
            <div style="text-align:center; font-weight:bold; margin-bottom:10px; font-size:16px; border-bottom:3px solid #ff9800; padding-bottom:10px;">KISI-KISI SOAL STS KELAS 3 (GANJIL)</div>
            <table class="kisi-table" width="100%">
                <thead>
                    <tr>
                        <th width="5%">NO</th>
                        <th width="20%">MATERI</th>
                        <th>INDIKATOR SOAL</th>
                        <th width="15%">BENTUK SOAL</th>
                        <th width="10%">NO SOAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab A.</b><br>Kombinasi Gerak Lokomotor</td>
                        <td>Disajikan gambar, siswa mampu mengidentifikasi kombinasi gerak jalan dan lari.</td>
                        <td>Pilihan Ganda</td>
                        <td>1-4</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Disajikan pernyataan, siswa dapat menjelaskan cara melakukan permainan lompat tali.</td>
                        <td>Isian</td>
                        <td>21</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Siswa dapat menyebutkan manfaat gerakan berlari.</td>
                        <td>Essay</td>
                        <td>1</td>
                    </tr>

                    <tr>
                        <td>4</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab B.</b><br>Kombinasi Gerak Non-Lokomotor</td>
                        <td>Disajikan gambar, siswa mampu menentukan gerakan memutar lengan dan meliukkan badan.</td>
                        <td>Pilihan Ganda</td>
                        <td>5-8</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Siswa dapat menentukan tujuan gerakan mencium lutut.</td>
                        <td>Isian</td>
                        <td>22</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Siswa dapat menjelaskan cara melakukan gerakan mengayun lengan.</td>
                        <td>Essay</td>
                        <td>2</td>
                    </tr>

                    <tr>
                        <td>7</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab C.</b><br>Kombinasi Gerak Manipulatif</td>
                        <td>Disajikan gambar, siswa mengetahui teknik menendang bola (kaki bagian dalam/luar).</td>
                        <td>Pilihan Ganda</td>
                        <td>9-12</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Siswa dapat menyebutkan alat yang digunakan dalam permainan kasti.</td>
                        <td>Isian</td>
                        <td>23</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Siswa dapat menjelaskan cara melempar bola melambung.</td>
                        <td>Essay</td>
                        <td>3</td>
                    </tr>

                    <tr>
                        <td>10</td>
                        <td rowspan="2" style="vertical-align:middle;"><b>Bab D.</b><br>Kebugaran Jasmani</td>
                        <td>Disajikan gambar, siswa dapat mengidentifikasi bentuk latihan kekuatan otot (Push-up/Sit-up).</td>
                        <td>Pilihan Ganda</td>
                        <td>13-15</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>Siswa dapat menjelaskan arti istirahat yang cukup bagi kesehatan.</td>
                        <td>Essay</td>
                        <td>4, 5</td>
                    </tr>
                </tbody>
            </table>`; 

        const HTML_KISI_SAS = `
            <div style="text-align:center; font-weight:bold; margin-bottom:10px; font-size:16px; border-bottom:3px solid #ff9800; padding-bottom:10px;">KISI-KISI SOAL SAS KELAS 3 (GENAP)</div>
            <table class="kisi-table" width="100%">
                <thead>
                    <tr>
                        <th width="5%">NO</th>
                        <th width="20%">MATERI</th>
                        <th>INDIKATOR SOAL</th>
                        <th width="15%">BENTUK SOAL</th>
                        <th width="10%">NO SOAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab E.</b><br>Senam Lantai</td>
                        <td>Disajikan gambar, siswa mampu menentukan sikap keseimbangan (Pesawat Terbang/Lilin).</td>
                        <td>Pilihan Ganda</td>
                        <td>1-4</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Siswa dapat menjelaskan tumpuan saat melakukan gerakan meroda.</td>
                        <td>Isian</td>
                        <td>21</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Siswa dapat menyebutkan alat bantu dalam senam lantai (matras).</td>
                        <td>Essay</td>
                        <td>1</td>
                    </tr>

                    <tr>
                        <td>4</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab F.</b><br>Gerak Berirama</td>
                        <td>Disajikan gambar, siswa dapat mengidentifikasi gerak langkah kaki berirama.</td>
                        <td>Pilihan Ganda</td>
                        <td>5-8</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Siswa dapat menyebutkan alat yang digunakan dalam senam irama (simpai/bola/pita).</td>
                        <td>Isian</td>
                        <td>22</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Siswa dapat menjelaskan pentingnya keserasian gerak dengan musik.</td>
                        <td>Essay</td>
                        <td>2</td>
                    </tr>

                    <tr>
                        <td>7</td>
                        <td rowspan="3" style="vertical-align:middle;"><b>Bab G.</b><br>Aktivitas Renang</td>
                        <td>Siswa mengetahui teknik dasar meluncur di air.</td>
                        <td>Pilihan Ganda</td>
                        <td>9-12</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Disajikan pernyataan, siswa dapat menyebutkan gaya renang yang menyerupai katak.</td>
                        <td>Isian</td>
                        <td>23</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Siswa dapat menjelaskan cara menjaga keselamatan di kolam renang.</td>
                        <td>Essay</td>
                        <td>3</td>
                    </tr>

                    <tr>
                        <td>10</td>
                        <td rowspan="2" style="vertical-align:middle;"><b>Bab H.</b><br>Kesehatan & Bahaya Rokok</td>
                        <td>Disajikan gambar, siswa dapat menunjukkan bahaya merokok bagi paru-paru.</td>
                        <td>Pilihan Ganda</td>
                        <td>13-15</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>Siswa dapat menyebutkan zat berbahaya yang terkandung dalam rokok (Nikotin/Tar).</td>
                        <td>Essay</td>
                        <td>4, 5</td>
                    </tr>
                </tbody>
            </table>`;

        // ==========================================
        // 2. KONEKSI FIREBASE (JALUR KELAS 3)
        // ==========================================
        const firebaseConfig = { apiKey: "AIzaSyD7FsbgyUF1jvDvcrb6wrWlEiQJUFZG3kE", authDomain: "pjok-sekolah-bapak-rendi.firebaseapp.com", databaseURL: "https://pjok-sekolah-bapak-rendi-default-rtdb.asia-southeast1.firebasedatabase.app", projectId: "pjok-sekolah-bapak-rendi", appId: "1:337016584526:web:8534c7cf4012a35427861f" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        let statusUjian = {};

        // SINKRONISASI DATABASE KELAS 3
        database.ref('akses_soal/kelas_3').on('value', (snap) => {
            statusUjian = snap.val() || {};
            renderPage(); 
            document.getElementById('conn-status').innerText = "Status: Terhubung";
            document.getElementById('conn-status').style.background = "#00c853";
        });

        let cur = 'a';
        function bukaHalaman(k, b) { cur=k; document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active')); if(b)b.classList.add('active'); renderPage(); }

        function renderPage() {
            const d = dataMateri[cur];
            const isOpen = statusUjian[cur.toUpperCase()] === true;
            let h = `<h2>${d.title}</h2>`;

            if(!d.isExam) {
                h += `
                <div class="video-container"><iframe src="https://www.youtube.com/embed/${d.vid}" allowfullscreen></iframe></div>
                <div class="info-card"><h3>üìã Rangkuman Materi</h3>${d.desc}</div>`;
            } else {
                h += `
                <div class="exam-header">
                    <div class="exam-title">${d.title}</div>
                    <div class="exam-desc">${d.desc}</div>
                    <div><span class="badge">‚è± 90 Menit</span><span class="badge">üìù ${d.count}</span><span class="badge">üõ° Jujur</span></div>
                </div>`;
            }

            h += `<div class="btn-group">`;
            if(d.isExam) h += `<button class="action-btn btn-kisi" onclick="tampilKisi('${cur}')">üëÅÔ∏è LIHAT KISI-KISI</button>`;
            
            if(isOpen) {
                // BUTTON MENUJU KUIS KELAS 3
                h += `<button class="action-btn btn-quiz" onclick="window.location.href='kuis_kelas_3.html?bab=${cur.toUpperCase()}&kelas=3'">üöÄ KERJAKAN SEKARANG</button>`;
                h += `<button class="action-btn btn-download" onclick="downloadSoal('${cur}')">üìÑ DOWNLOAD NASKAH SOAL</button>`;
            } else {
                h += `<button class="action-btn" disabled style="background:#e0e0e0; color:#999;">üîí AKSES TERTUTUP</button>`;
            }
            h += `</div>`;

            if(d.isExam) {
                const isiKisi = cur === 'sts' ? HTML_KISI_STS : HTML_KISI_SAS;
                h += `<div id="kisi-${cur}" class="kisi-container">${isiKisi}</div>`;
            }

            document.getElementById('content-dynamic').innerHTML = h;
            window.scrollTo(0,0);
        }

        function tampilKisi(kode) {
            const el = document.getElementById('kisi-' + kode);
            if(el) { el.style.display = el.style.display === 'block' ? 'none' : 'block'; if(el.style.display === 'block') el.scrollIntoView({behavior:'smooth'}); }
        }

        // ==========================================
        // 3. FUNGSI DOWNLOAD PDF (KHUSUS KELAS 3)
        // ==========================================
        window.downloadSoal = function(kode) {
            if(!window.BANK_SOAL_3 || !window.BANK_SOAL_3[kode.toUpperCase()]) { alert("Bank soal belum dimuat."); return; }
            window.scrollTo(0, 0);

            const soal = window.BANK_SOAL_3[kode.toUpperCase()];
            const judul = dataMateri[kode].title.replace("A. ", "").replace("B. ", "").replace("C. ", "").replace("D. ", "").replace("E. ", "").replace("F. ", "").replace("G. ", "").replace("H. ", "");
            
            const div = document.getElementById('pdf-content');
            let html = `
                <table class="pdf-header-table">
                    <tr><td align="center"><h3 style="margin:0; font-size:16pt;">LEMBAR KERJA PESERTA DIDIK (LKPD)</h3><h4 style="margin:5px 0; font-size:14pt;">SD NEGERI 1 CERDAS - PJOK KELAS 3</h4></td></tr>
                </table>
                <table width="100%" style="margin-bottom:15px; border-bottom:2px solid black; font-weight:bold;">
                    <tr><td>Nama : ...........................................</td><td align="right">Hari/Tgl : ..........................</td></tr>
                    <tr><td>Materi : ${judul}</td><td align="right">Nilai : ..........................</td></tr>
                </table>`;

            let no = 1;
            // FORMAT 4 OPSI (A, B, C, D)
            if(soal.pg) {
                html += `<div class="pdf-section">I. Pilihlah jawaban yang paling benar!</div>`;
                soal.pg.forEach(s => {
                    html += `<div class="pdf-item">${no}. ${s.q}<br>
                        <div class="pdf-options" style="margin-top:5px;">
                            A. ${s.opt[0]} &nbsp;&nbsp;&nbsp; 
                            B. ${s.opt[1]} &nbsp;&nbsp;&nbsp; 
                            C. ${s.opt[2]} &nbsp;&nbsp;&nbsp; 
                            D. ${s.opt[3]}
                        </div>
                    </div>`;
                    no++;
                });
            }
            if(soal.isian && soal.isian.length > 0) {
                html += `<div class="pdf-section">II. Isilah titik-titik di bawah ini!</div>`;
                soal.isian.forEach(s => { html += `<div class="pdf-item">${no}. ${s} ...........................................</div>`; no++; });
            }
            if(soal.essay) {
                html += `<div class="pdf-section">III. Jawablah pertanyaan berikut!</div>`;
                soal.essay.forEach(s => { html += `<div class="pdf-item">${no}. ${s}<br><br><br></div>`; no++; });
            }

            div.innerHTML = html;

            html2pdf().set({
                margin: [10, 15, 15, 15],
                filename: `Naskah_Soal_K3_${kode.toUpperCase()}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true, scrollY: 0 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            }).from(div).save();
        };

        window.onload = () => {
            const navA = document.getElementById('nav-a');
            if(navA) bukaHalaman('a', navA);
        };
    </script>
</body>
</html>